{% load static %}
<!DOCTYPE html>

<html lang="en" class="light-style layout-navbar-fixed layout-menu-fixed" dir="ltr" data-theme="theme-default" data-assets-path="{% static 'assets/' %}" data-template="vertical-menu-template">
  <head>
    <link rel="stylesheet" type="text/css" href="{% static 'assets/vendor/css/pages/assistant.css' %}" />
    {% block header %}

    {% endblock %}
    <link rel="stylesheet" type="text/css" href="{% static 'assets/vendor/libs/toastr/toastr.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'assets/vendor/libs/animate-css/animate.css' %}" />
    <style>
      .logo {
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .m-header {
        padding-left: 0 !important;
      }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCG0SDQSBB"></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())
      
      gtag('config', 'G-ZCG0SDQSBB')
    </script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Layout container -->
        <div class="layout-page m-header">
          <!-- Navbar -->

          <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme" style="padding: 0 40px;" id="layout-navbar">
            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <!-- Logo -->
              <a href="/" class="auth-cover-brand align-items-center gap-2 d-flex" style="inset-block-start: auto;">
                <span class="app-brand-logo demo">
                  <span style="color: var(--bs-primary)">
                    <svg width="268" height="150" viewBox="0 0 38 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M30.0944 2.22569C29.0511 0.444187 26.7508 -0.172113 24.9566 0.849138C23.1623 1.87039 22.5536 4.14247 23.5969 5.92397L30.5368 17.7743C31.5801 19.5558 33.8804 20.1721 35.6746 19.1509C37.4689 18.1296 38.0776 15.8575 37.0343 14.076L30.0944 2.22569Z" fill="currentColor" />
                      <path d="M30.171 2.22569C29.1277 0.444187 26.8274 -0.172113 25.0332 0.849138C23.2389 1.87039 22.6302 4.14247 23.6735 5.92397L30.6134 17.7743C31.6567 19.5558 33.957 20.1721 35.7512 19.1509C37.5455 18.1296 38.1542 15.8575 37.1109 14.076L30.171 2.22569Z" fill="url(#paint0_linear_2989_100980)" fill-opacity="0.4" />
                      <path d="M22.9676 2.22569C24.0109 0.444187 26.3112 -0.172113 28.1054 0.849138C29.8996 1.87039 30.5084 4.14247 29.4651 5.92397L22.5251 17.7743C21.4818 19.5558 19.1816 20.1721 17.3873 19.1509C15.5931 18.1296 14.9843 15.8575 16.0276 14.076L22.9676 2.22569Z" fill="currentColor" />
                      <path d="M14.9558 2.22569C13.9125 0.444187 11.6122 -0.172113 9.818 0.849138C8.02377 1.87039 7.41502 4.14247 8.45833 5.92397L15.3983 17.7743C16.4416 19.5558 18.7418 20.1721 20.5361 19.1509C22.3303 18.1296 22.9391 15.8575 21.8958 14.076L14.9558 2.22569Z" fill="currentColor" />
                      <path d="M14.9558 2.22569C13.9125 0.444187 11.6122 -0.172113 9.818 0.849138C8.02377 1.87039 7.41502 4.14247 8.45833 5.92397L15.3983 17.7743C16.4416 19.5558 18.7418 20.1721 20.5361 19.1509C22.3303 18.1296 22.9391 15.8575 21.8958 14.076L14.9558 2.22569Z" fill="url(#paint1_linear_2989_100980)" fill-opacity="0.4" />
                      <path d="M7.82901 2.22569C8.87231 0.444187 11.1726 -0.172113 12.9668 0.849138C14.7611 1.87039 15.3698 4.14247 14.3265 5.92397L7.38656 17.7743C6.34325 19.5558 4.04298 20.1721 2.24875 19.1509C0.454514 18.1296 -0.154233 15.8575 0.88907 14.076L7.82901 2.22569Z" fill="currentColor" />
                      <defs>
                        <linearGradient id="paint0_linear_2989_100980" x1="5.36642" y1="0.849138" x2="10.532" y2="24.104" gradientUnits="userSpaceOnUse">
                          <stop offset="0" stop-opacity="1" />
                          <stop offset="1" stop-opacity="0" />
                        </linearGradient>
                        <linearGradient id="paint1_linear_2989_100980" x1="5.19475" y1="0.849139" x2="10.3357" y2="24.1155" gradientUnits="userSpaceOnUse">
                          <stop offset="0" stop-opacity="1" />
                          <stop offset="1" stop-opacity="0" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </span>
                </span>
                <span class="app-brand-text demo text-heading fw-bold">PDF CAKE</span>
              </a>
              <!-- /Logo -->

              <ul class="navbar-nav flex-row align-items-center ms-auto">
                <!-- Style Switcher -->
                <li class="nav-item me-1 me-xl-0">
                  <a class="nav-link btn btn-text-secondary rounded-pill btn-icon style-switcher-toggle hide-arrow" href="javascript:void(0);"><i class="mdi mdi-24px"></i></a>
                </li>
                <!-- / Style Switcher -->

                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <div class="avatar avatar-online">
                      <img src="{% static 'assets/img/avatars/1.png' %}" alt class="w-px-40 h-auto rounded-circle" />
                    </div>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <span class="dropdown-item">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <img src="{% static 'assets/img/avatars/1.png' %}" alt class="w-px-40 h-auto rounded-circle" />
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block">{{ request.user.email }}</span>
                            <small class="text-muted">{{ request.user.name }}</small>
                          </div>
                        </div>
                      </span>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    {% comment %} <li>
                      <a class="dropdown-item" href="pages-profile-user.html">
                        <i class="mdi mdi-account-outline me-2"></i>
                        <span class="align-middle">My Profile</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-account-settings-account.html">
                        <i class="mdi mdi-cog-outline me-2"></i>
                        <span class="align-middle">Settings</span>
                      </a>
                    </li> {% endcomment %}
                    <li>
                      <a class="dropdown-item" href="/pricing">
                        <span class="d-flex align-items-center align-middle">
                          <i class="mdi mdi-currency-usd me-2"></i>
                          <span class="flex-grow-1 align-middle">Upgrade</span>
                          {% comment %} <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span> {% endcomment %}
                        </span>
                      </a>
                    </li>
                    {% comment %} <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-help-center-landing.html">
                        <i class="mdi mdi-lifebuoy me-2"></i>
                        <span class="align-middle">Help</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="/faq">
                        <i class="mdi mdi-help-circle-outline me-2"></i>
                        <span class="align-middle">FAQ</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="pages-pricing.html">
                        <i class="mdi mdi-currency-usd me-2"></i>
                        <span class="align-middle">Pricing</span>
                      </a>
                    </li>
                    <li>
                      {% endcomment %}
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="/logout">
                        <i class="mdi mdi-logout me-2"></i>
                        <span class="align-middle">Log Out</span>
                      </a>
                    </li>
                  </ul>
                </li>
                <!-- / User -->
              </ul>
            </div>

            <!-- Search Small Screens -->
            <div class="navbar-search-wrapper search-input-wrapper d-none">
              <input type="text" class="form-control search-input container-xxl border-0" placeholder="Search..." aria-label="Search..." />
              <i class="mdi mdi-close search-toggler cursor-pointer"></i>
            </div>
          </nav>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            
            <!-- Content -->
            <div class="container-xxl flex-grow-1 container-p-y pt-0 pb-0">
              {% block body %}

              {% endblock %}
            </div>
            <!-- / Content -->

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl">
                <div class="footer-container d-flex align-items-center justify-content-between p-3 flex-md-row flex-column">
                  <div class="mb-2 mb-md-0" style="text-align: center;">
                    ©<script>
                       document.write(new Date().getFullYear())
                     </script>, <span class="d-none d-sm-inline">made with <span class="text-danger">❤️</span></span> by
                    <a href="/"  class="footer-link fw-medium">PDF CAKE</a>
                  </div>
                  <div class="d-flex gap-2 gap-sm-4 justify-content-center" style="text-align: center; flex-wrap: wrap;">
                    <a href="/pricing" class="footer-link">Pricing</a>
                    <a href="/about"  class="footer-link">About</a>
                    {% comment %} <a href="/blog" class="footer-link">Blog</a>
                    <a href="/faq"  class="footer-link">FAQ</a>
                    <a href="/contact"  class="footer-link">Contact</a>
                     {% endcomment %}
                  </div>
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
    </div>

    <!-- / Layout wrapper -->

    {% block script %}

    {% endblock %}
    <script src="{% static 'assets/vendor/libs/toastr/toastr.js' %}"></script>
    <script>
      $(document).ready(function () {
        errorMessage = '{{error}}'
        warningMessage = '{{warning}}'
        successMessage = '{{success}}'
        infoMessage = '{{info}}'
      
        if (errorMessage.length > 0) alert('error', errorMessage)
        if (warningMessage.length > 0) alert('warning', warningMessage)
        if (successMessage.length > 0) alert('success', successMessage)
        if (infoMessage.length > 0) alert('info', infoMessage)
      
        var csrftoken = jQuery('[name=csrfmiddlewaretoken]').val()
      
        var INDEX = 0
        $('#chat-submit').click(function (e) {
          e.preventDefault()
          var msg = $('#chat-input').val()
          if (msg.trim() == '') {
            return false
          }
          generate_message(msg, 'self')
      
          $.ajax({
            type: 'POST',
            url: '/chat',
            headers: {
              'X-CSRFToken': csrftoken
            },
            data: { history: 'first chat', question: msg },
            success: function (res) {
              generate_message(res, 'user')
            }
          })
        })
      
        function generate_message(msg, type) {
          INDEX++
          var str = ''
          str += '<div id="cm-msg-' + INDEX + '" class="chat-msg ' + type + '">'
          str += '          <span class="msg-avatar">'
          if (type == 'self') {
            str += `<img src="{% static 'assets/img/avatars/1.png' %}" alt="twbs" width="32" height="32" class="rounded-circle flex-shrink-0">`
          } else {
            str += `<img src="{% static 'assets/img/avatars/bot.jfif' %}" alt="twbs" width="32" height="32" class="rounded-circle flex-shrink-0">`
          }
          str += '          </span>'
          str += '          <div class="cm-msg-text" style="font-size:14px">'
          str += msg
          str += '          </div>'
          str += '        </div>'
          $('.chat-logs').append(str)
          $('#cm-msg-' + INDEX)
            .hide()
            .fadeIn(300)
          if (type == 'self') {
            $('#chat-input').val('')
          }
          $('.chat-logs')
            .stop()
            .animate({ scrollTop: $('.chat-logs')[0].scrollHeight }, 1000)
        }
      
        $('#chat-circle').click(function () {
          $('#chat-circle').toggle('scale')
          $('.chat-box').toggle('scale')
        })
      
        $('.chat-box-toggle').click(function () {
          $('#chat-circle').toggle('scale')
          $('.chat-box').toggle('scale')
        })
      })
    </script>
    <script>
      let alert = (type, message) => {
        var shortCutFunction = type, // 'success', 'warning', 'error', 'info'
          isRtl = $('html').attr('dir') === 'rtl',
          msg = message,
          title = ''
        console.log('type', shortCutFunction)
      
        toastr.options = {
          maxOpened: 1,
          autoDismiss: true,
          closeButton: true,
          debug: false,
          newestOnTop: true,
          progressBar: true,
          positionClass: 'toast-top-right',
          preventDuplicates: false,
          onclick: null,
          rtl: isRtl,
          showDuration: 300,
          hideDuration: 1000,
          timeOut: 5000,
          extendedTimeOut: 1000,
          showEasing: 'swing',
          hideEasing: 'linear',
          showMethod: 'fadeIn',
          hideMethod: 'fadeOut'
        }
      
        var $toast = toastr[shortCutFunction](msg, title) // Wire up an event handler to a button in the toast, if it exists
        $toastlast = $toast
      }
    </script>
  </body>
</html>
